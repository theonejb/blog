<!doctype html><html lang="en" dir="ltr"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><title>[Build Log] Project 1: Django + NextJS Boilerplate | Jibran’s Perspective</title><meta name="description" content="A collection of my thoughts and stuff." /><link href="/feed.xml" rel="alternate" type="application/atom+xml" /><link rel="canonical" href="/build_logs/project-1" /><link rel="stylesheet" href="/assets/style.css" /> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-VXRED3HCM0" ></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag("js", new Date()); gtag("config", "G-VXRED3HCM0"); </script><body><main><h2 class="title">Jibran’s Perspective</h2><nav> <a href="https://blog.asadjb.com">Home</a> <a href="https://blog.asadjb.com/about-me/">About Me</a></nav><h1>[Build Log] Project 1: Django + NextJS Boilerplate</h1><i>Feb 20, 2024</i><h4 class="subtitle"></h4><p>Build log for <a href="/blog/project-1-django-nextjs-boilerplate">Project 1: Django + NextJS Boilerplate</a>.</p><ul><li>19/3/2024 :: Forgot to update the build log for a while. Here’s what’s happened since last time.<ul><li>Finished token based auth. It uses a DRF API endpoint to sign in and stores the auth token in local storage.<li>The same token can be used in <code>fetch</code> calls to make authenticated requests to the Django backend.<li>Built a sign-in &amp; sign-up form. Need to get the sign-up form hooked up with the backend, which is next.</ul><li>6/3/2024<ul><li>Create a proof-of-concept for token based auth. The backend &amp; frontend are able to work together to sign in and use the token for authentication.<li>Made the <a href="https://github.com/Waraq-Labs/next.js-django-template/tree/Authentication">repo</a> public for now. Will keep it public until finished. The hope is that this leads to conversations with people who’re looking for a solution to the Django/Next.js integration and I can learn what they need.</ul><li>3/2/2024<ul><li>Finished adding helper scripts that<ul><li>Allow renaming the backend project to something more appropriate for the developer<li>Setup PyRight LSP for Zed (and other editors that use it)</ul><li>Worked on using 3rd party cookies to authenticate the API.<ul><li>Some problems<ul><li>Cross-domain cookies need HTTPS enabled. Will enable that with a simple self-signed cert and test it out.<ul><li><strong>This isn’t true. The problem was somewhere else.</strong></ul><li>3rd party/cross-domain cookies are being phased out. I’m only going through this to understand if/how I can make it work. This won’t make it into the final template.<ul><li>I was thinking of keeping this as the primary mechanism for authentication. Keeps things simple - and can be changed later if needed. However, further thoughts made me change my mind.<ul><li>Doesn’t require the use of a context to keep an authenticated token to send with all requests.<li>Conversely, the frontend has no way of knowing if it’s authenticated or not without making an API call. With a token, once you have a valid token you’re much more likely to be authenticated.<li>Django has no good way of setting the <code>Partitioned</code> flag on a cookie for now. There’s an <a href="https://code.djangoproject.com/ticket/34613">issue open</a>, but no fix yet. Very soon (<a href="https://developer.mozilla.org/en-US/blog/goodbye-third-party-cookies/">Q1 2024 according to MDN</a>) Chrome will roll out 3rd party cookie blocking and there won’t be a simple fix.</ul></ul></ul><li>Cross-domain cookies being phased out and replaced with other technologies to allow the same use case; in our case it’s using cookies to authenticate to our own backend on a different domain.<ul><li>Some further reading on this:<ul><li><a href="https://developer.mozilla.org/en-US/blog/goodbye-third-party-cookies/">https://developer.mozilla.org/en-US/blog/goodbye-third-party-cookies/</a><li><a href="https://developers.google.com/privacy-sandbox/3pcd">https://developers.google.com/privacy-sandbox/3pcd</a></ul><li>Another very viable alternative (though not as developer friendly for the local development environment) is having the backend and frontend be on the same base domain; api.site.com &amp; www.site.com for example.<ul><li>Will try to check this out as well.</ul></ul><li><strong>Summary</strong><ul><li>I was able to get cross-domain cookies working - will write a blog post with my experiences &amp; thoughts.<li>However, with the constraints I talked about above, that doesn’t seem to be the best way forward.<li>Instead, I’ll transition to using token based authentication.</ul></ul></ul><li>23/2/2024<ul><li>Finished setting up the initial backend &amp; frontend app. Next step is to code the basic integration b/w the two.</ul><li>22/2/2024<ul><li>Completed initial Django project setup with Poetry</ul><li>20/2/2024<ul><li>Asked for feedback on Reddit &amp; updated blog post with Gumroad link.<li>Added build logs to blog.<li>Asked for feedback on Reddit &amp; updated blog post with Gumroad link.<li>Added build log pages to my blog. This is the first one!</ul><li>18/2/2024<ul><li>Setup Github repo &amp; GitButler. This small low-stakes projects seems like a good place to learn how to use GitButler.<li>Wrote a list of tasks that I’ll need to complete over the next few days. Breaking down large projects into very small manageable pieces helps me immensely. When I don’t do this I keep “staring into the void” and don’t make any meaningful progress.</ul><li>17/2/2024<ul><li>Finished the 1st draft of the <a href="https://asadjb.gumroad.com/l/nextjs-django-template">Gumroad page</a> &amp; setup Calendly for paid meeting.</ul><li>16/2/2024<ul><li>Wrote the <a href="/blog/project-1-django-nextjs-boilerplate">launch post</a> with some details and goals. Posted about it on Twitter.</ul></ul></main><footer> <a href="/">← Back to all writings</a><div class="bottom-footer"> <i> Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>. </i> <i> Theme: <a href="https://knhash.in/jekyllBear" target="_blank">jekyllBear</a>. </i></div></footer>
